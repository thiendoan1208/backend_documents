https://docs.docker.com/get-started/workshop/





\#1 DOCKER LÃ€ GÃŒ - Táº I SAO CHÃšNG TA Láº I Cáº¦N DOCKER ?



ğŸ³ Docker lÃ  gÃ¬?



Docker = Há»‡ thá»‘ng Ä‘á»ƒ Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vÃ  mÃ´i trÆ°á»ng cháº¡y vÃ o container.



Má»—i container giá»‘ng nhÆ° má»™t mÃ¡y tÃ­nh mini cháº¡y riÃªng biá»‡t nhÆ°ng dÃ¹ng chung tÃ i nguyÃªn há»‡ Ä‘iá»u hÃ nh vá»›i mÃ¡y chá»§ host.



Docker sá»­ dá»¥ng cÃ¡c image (áº£nh) â€“ báº£n sao "Ä‘Ã³ng bÄƒng" cá»§a há»‡ Ä‘iá»u hÃ nh + á»©ng dá»¥ng â€“ Ä‘á»ƒ táº¡o ra container.



âš¡ Táº¡i sao chÃºng ta cáº§n Docker?



âœ… 1. Cháº¡y á»Ÿ má»i nÆ¡i



â€œIt works on my machineâ€ khÃ´ng cÃ²n lÃ  váº¥n Ä‘á».



Docker Ä‘áº£m báº£o á»©ng dá»¥ng cháº¡y giá»‘ng nhau trÃªn má»i mÃ¡y: dev, staging, production.



KhÃ´ng cáº§n lo vá» phiÃªn báº£n Node.js, Python, thÆ° viá»‡n há»‡ Ä‘iá»u hÃ nh... vÃ¬ táº¥t cáº£ Ä‘Ã£ náº±m trong image.



âœ… 2. Dá»… deploy vÃ  rollback



Báº¡n chá»‰ cáº§n build 1 Docker image â†’ deploy lÃªn báº¥t ká»³ server nÃ o há»— trá»£ Docker.



Náº¿u cÃ³ lá»—i, cÃ³ thá»ƒ rollback vá» image cÅ© ráº¥t dá»… dÃ ng.



âœ… 3. Dá»… phÃ¡t triá»ƒn vÃ  kiá»ƒm thá»­



CÃ³ thá»ƒ táº¡o nhiá»u container cho tá»«ng thÃ nh pháº§n:



Web frontend (React, Vue, ...)



Backend API (Node.js, Express, ...)



Database (MySQL, PostgreSQL, MongoDB, ...)



TÃ¡ch biá»‡t mÃ´i trÆ°á»ng, trÃ¡nh xung Ä‘á»™t thÆ° viá»‡n hay cá»•ng.



âœ… 4. Tiáº¿t kiá»‡m tÃ i nguyÃªn hÆ¡n VM



Container dÃ¹ng chung kernel cá»§a host OS â†’ nháº¹ hÆ¡n mÃ¡y áº£o (VM).



Khá»Ÿi Ä‘á»™ng nhanh, chiáº¿m Ã­t RAM/CPU hÆ¡n.



âœ… 5. CI/CD \& DevOps thÃ¢n thiá»‡n



Docker tÃ­ch há»£p tá»‘t vá»›i cÃ¡c cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a:



Jenkins, GitHub Actions, GitLab CI,...



Há»— trá»£ quy trÃ¬nh build â†’ test â†’ deploy hoÃ n toÃ n tá»± Ä‘á»™ng.



ğŸ”§ VÃ­ dá»¥ thá»±c táº¿



Báº¡n Ä‘ang lÃ m má»™t web app React + Node.js + MySQL:



Truyá»n thá»‘ng: CÃ i MySQL, Node, npm,... trÃªn mÃ¡y tháº­t â†’ dá»… lá»—i, tá»‘n thá»i gian.



DÃ¹ng Docker:



Viáº¿t Dockerfile cho backend



DÃ¹ng docker-compose Ä‘á»ƒ cháº¡y MySQL, backend, frontend cÃ¹ng lÃºc



Dá»… dÃ ng chia sáº» code + mÃ´i trÆ°á»ng cho team



ğŸ“Œ Káº¿t luáº­n



Docker khÃ´ng báº¯t buá»™c pháº£i dÃ¹ng, nhÆ°ng cá»±c ká»³ há»¯u Ã­ch khi:



LÃ m viá»‡c nhÃ³m



Triá»ƒn khai á»©ng dá»¥ng lÃªn server



LÃ m DevOps, CI/CD



PhÃ¡t triá»ƒn microservices





\#2 GETTING STARTED Vá»šI DOCKER DESKTOP - CHUáº¨N Bá»Š MÃ”I

TRÆ¯á»œNG CHO DOCKER





âœ… Docker Desktop:

Â 	+  lÃ  pháº§n má»m cÃ i trÃªn mÃ¡y tÃ­nh (Windows/macOS) giÃºp báº¡n cháº¡y vÃ  quáº£n lÃ½ Docker dá»… dÃ ng. NÃ³ bao gá»“m:



Docker Engine (Ä‘á»ƒ cháº¡y container)



Giao diá»‡n Ä‘á»“ há»a Ä‘á»ƒ xem container, image, volume



Terminal Ä‘á»ƒ gÃµ lá»‡nh Docker



DÃ¹ng ráº¥t tiá»‡n cho láº­p trÃ¬nh viÃªn phÃ¡t triá»ƒn vÃ  test á»©ng dá»¥ng



âœ… Docker Hub:

Â 	+  lÃ  kho lÆ°u trá»¯ Docker image trÃªn internet. NÃ³ giá»‘ng nhÆ° GitHub nhÆ°ng dÃ nh cho Docker.

Báº¡n cÃ³ thá»ƒ táº£i (pull) cÃ¡c image phá»• biáº¿n nhÆ° node, mysql, ubuntu, v.v.



CÃ³ thá»ƒ tá»± táº¡o image vÃ  Ä‘áº©y (push) lÃªn Ä‘á»ƒ chia sáº» hoáº·c deploy



CÃ³ tÃ i khoáº£n miá»…n phÃ­ vÃ  há»— trá»£ repo riÃªng tÆ° náº¿u cáº§n



TÃ³m láº¡i:

ğŸ‘‰ Docker Desktop lÃ  cÃ´ng cá»¥ dÃ¹ng trÃªn mÃ¡y Ä‘á»ƒ phÃ¡t triá»ƒn

ğŸ‘‰ Docker Hub lÃ  nÆ¡i lÆ°u trá»¯ image Ä‘á»ƒ dÃ¹ng hoáº·c chia sáº»





\#3 HELLO WORLD Vá»šI DOCKER - CHáº Y á»¨NG Dá»¤NG Äáº¦U TIÃŠN Báº°NG DOCKER



Â  1. ChÆ°a cÃ³ docker hub thÃ¬ nÃªn táº¡o 1 cÃ¡i Ä‘á»ƒ sau nÃ y pull image lÃªn



Â 	https://hub.docker.com/



Â 

Â 	> Táº¡o 1 container Ä‘áº§u tiÃªn

Â 

Â 	+ docker run -dp 80:80 docker/getting-started



Â         + ngÆ°á»i dÃ¹ng sau nÃ y chá»‰ cáº§n cháº¡y 1 cÃ¢u lá»‡nh lÃ  Ä‘Ã£ cÃ³ toÃ n bá»™ sáº£n pháº©m

Â 



\#4 BUILD \& CHáº Y IMAGE á»¨NG Dá»¤NG NODE.JS Vá»šI DOCKER





Â 	1. Docker Image, Container lÃ  gÃ¬



ğŸ§± Docker Image lÃ  gÃ¬?



Docker Image lÃ  báº£n Ä‘Ã³ng gÃ³i cá»§a á»©ng dá»¥ng vÃ  mÃ´i trÆ°á»ng cháº¡y cá»§a nÃ³ (há»‡ Ä‘iá»u hÃ nh, runtime, thÆ° viá»‡n, file mÃ£ nguá»“nâ€¦).



NÃ³ giá»‘ng nhÆ° má»™t báº£n chá»¥p (snapshot) sáºµn sÃ ng Ä‘á»ƒ táº¡o ra cÃ¡c container.



Image lÃ  báº¥t biáº¿n (khÃ´ng thay Ä‘á»•i sau khi build).





ğŸ“¦ Docker Container lÃ  gÃ¬?



Docker Container lÃ  phiÃªn báº£n Ä‘ang cháº¡y cá»§a má»™t image.



NÃ³ giá»‘ng nhÆ° má»™t "á»©ng dá»¥ng tháº­t" Ä‘ang hoáº¡t Ä‘á»™ng.



Má»—i container tÃ¡ch biá»‡t vá»›i mÃ¡y chá»§ vÃ  cÃ¡c container khÃ¡c.





ğŸ‘‰ CÃ³ thá»ƒ hÃ¬nh dung:



Docker image giá»‘ng nhÆ° Ä‘á»‘ng file Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i sáºµn (bao gá»“m mÃ£ nguá»“n, thÆ° viá»‡n, mÃ´i trÆ°á»ngâ€¦). NÃ³ khÃ´ng cháº¡y Ä‘Æ°á»£c, chá»‰ lÃ  "máº«u chuáº©n".



Docker container giá»‘ng nhÆ° mÃ¡y áº£o nháº¹, khi báº¡n "báº­t" container thÃ¬ nÃ³ nháº­n Ä‘á»‘ng file tá»« image vÃ  cháº¡y á»©ng dá»¥ng tá»« Ä‘Ã³.





Â 	2. Cháº¡y app Ä‘áº§u tiÃªn vá»›i docker (Ä‘Ã³ng vai 1 user)



Â 	https://docs.docker.com/get-started/introduction/develop-with-containers/





Â 		TrÆ°á»ng há»£p 1: CÃ³ docker-compose.yml



docker-compose up --build -d ( -d: cháº¿ Ä‘á»™ ná»n, --build náº¿u chÆ°a build image)

Â 

Â 		TrÆ°á»ng há»£p 2: KhÃ´ng cÃ³ docker-compose.yml



\# Build image (tÃªn tÃ¹y chá»n, vÃ­ dá»¥: todo-app)

docker build -t todo-app .



\# Cháº¡y container

docker run -p 3000:3000 todo-app (cÃ¹ng port vá»›i mÃ¡y)





Â 	> Kiá»ƒm tra http://localhost:3000









Â 	3. Má»™t sá»‘ Ä‘iá»u cáº§n biáº¿t



Â 		1. Dockerfile lÃ  gÃ¬?



Â 		+ Dockerfile lÃ  file chá»©a hÆ°á»›ng dáº«n Ä‘á»ƒ build ra má»™t Docker image.





Â 		2. docker-compose.yml lÃ  gÃ¬?



Â 			+ docker-compose.yml lÃ  file Ä‘á»‹nh nghÄ©a cÃ¡ch cháº¡y nhiá»u container cÃ¹ng lÃºc.



Â 			+ docker compose up, cháº¡y cÃ¹ng lÃºc cÃ¡c thiáº¿t láº­p Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a





Â 

Â 	4. Táº¡i sao cÃ³ 2 cÃ¡ch khÃ¡c nhau?



TrÆ°á»ng há»£p			Lam gÃ¬

âŒ KhÃ´ng cÃ³ docker-compose.yml	Báº¡n pháº£i tá»± build vÃ  run tá»«ng container báº±ng tay: docker build, docker run...



âœ… CÃ³ docker-compose.yml	Báº¡n chá»‰ cáº§n docker compose up Ä‘á»ƒ khá»Ÿi Ä‘á»™ng táº¥t cáº£ má»i thá»©:

Â 				backend, frontend, db... tá»± Ä‘á»™ng





Â 	5. âš™ï¸ So sÃ¡nh nhanh: docker compose up vs docker compose watch





Lá»‡nh			Má»¥c Ä‘Ã­ch	                 CÃ³ rebuild khi sá»­a code?		CÃ³ tá»± restart

docker compose up		Khá»Ÿi cháº¡y container	âŒ KhÃ´ng tá»± rebuild		âŒ KhÃ´ng tá»± restart





docker compose watch	Theo dÃµi thay Ä‘á»•i code vÃ  rebuild láº¡i		âœ… CÃ³	âœ… CÃ³







\#5 Cáº¬P NHáº¬T á»¨NG Dá»¤NG DOCKER



Â 	1. Cáº­p nháº­t ná»™i dung vá»›i Docker



Â 	+ Trong trÆ°á»ng há»£p ta cÃ³ compose.yml thÃ¬ chá»‰ cáº§n cháº¡y docker compose watch lÃ  á»©ng dá»¥ng sáº½ tá»± Ä‘á»™ng apply thay Ä‘á»•i má»›i



Â 	+ Trong trÆ°á»ng há»£p khÃ´ng cÃ³ thÃ¬ ta pháº£i cháº¡y thá»§ cÃ´ng láº¡i sau khi chá»‰nh sá»­a



\# Build image (tÃªn tÃ¹y chá»n, vÃ­ dá»¥: todo-app)

docker build -t todo-app .



\# Cháº¡y container

docker run -p 3000:3000 todo-app (cÃ¹ng port vá»›i mÃ¡y)



Â 

Â 	2. Stop container



Â 	docker stop <container\_id hoáº·c container\_name>



Â 

Â 	3. XÃ³a háº³n container



Â 	docker rm <container\_id hoáº·c container\_name>



Â 

Â 	> docker compose down ( vá»«a stop vá»«a xÃ³a luÃ´n container )





4\. List docker





Â 	docker ps or docker ps -a







>> CÃ¡ch Ä‘Æ¡n giáº£n nháº¥t lÃ  vÃ o háº³n docker desktop hoáº·c cÃ i extension trong vs vÃ  thao tÃ¡c







\#6.1 CHIA Sáºº á»¨NG Dá»¤NG DOCKER Vá»šI DOCKER HUB



Â 	1. Táº¡o 1 repo

Â 

Â 		https://hub.docker.com/



Â 	2. Äáº©y image tá»« local lÃªn docker hub



Â 		+ kiá»ƒm tra cÃ¡c images



Â 		docker images

Â 

Â 		+ gáº¯n tag cho image cáº§n push



Â 		docker tag getting-started-todo-app-backend thiendoan1208/getting-started-todo-app:latest



Â 			>  getting-started-todo-app-backend : tÃªn cÅ©

Â 

Â 			> getting-started-todo-app:latest : Ä‘á»•i tÃªn + gáº¯n tag



Â 			> thiendoan1208: userid

Â 

Â 		+ push



Â 		docker push thiendoan1208/getting-started-todo-app:latest



Â 			> getting-started-todo-app:latest: tÃªn + tag sau khi Ä‘á»•i





Â 		\* LÆ°u Ã½:



Pháº£i Ä‘á»•i name giá»‘ng vá»›i name cá»§a repo thÃ¬ nÃ³ má»›i push vÃ o cÃ¡i repo áº¥y, náº¿u khÃ´ng thÃ¬ nÃ³ sáº½ táº¡o 1 cÃ¡i repo má»›i



Repo cá»§a docker hub khÃ´ng pháº£i lÃ  1 container mÃ  lÃ  1 kho lÆ°u trá»¯ cÃ¡c images á»Ÿ nhiá»u phiÃªn báº£n khÃ¡c nhau

Â 



\#6.2 CHáº Y IMAGE DOCKER Tá»ª DOCKER HUB TRÃŠN CLOUD





Â 	https://labs.play-with-docker.com/



Â 	> CÃ³ 1 váº¥n Ä‘á» xáº£y ra. vÃ­ dá»¥ vá»›i todo list sau khi thÃªm note mÃ  ta build láº¡i thÃ¬ sáº½ máº¥t háº¿t táº¥t cáº£ dá»¯ liá»‡u. Sá»­ dá»¥ng Persist Data







\#7 GHI DATA Vá»šI VOLUME - PERSIST DATA Vá»šI CONTAINER DOCKER





Docker Volume lÃ  gÃ¬?



Docker Volume lÃ  vÃ¹ng lÆ°u trá»¯ dá»¯ liá»‡u bÃªn ngoÃ i container, dÃ¹ng Ä‘á»ƒ:



GiÃºp container lÆ°u trá»¯ dá»¯ liá»‡u lÃ¢u dÃ i (persistent data)



Cho phÃ©p chia sáº» dá»¯ liá»‡u giá»¯a nhiá»u container



TrÃ¡nh máº¥t dá»¯ liá»‡u khi container bá»‹ xÃ³a hoáº·c restart



2\. Sá»­ dá»¥ng



Â 	1. Táº¡o volume:



Â 	docker volume create mydata



Â 	2. DÃ¹ng trong container:



Â 	docker run -dp 127.0.0.1:3000:3000 --mount type=volume,src=todo-db,target=/etc/todos image:tag





Â 	> Mount dá»¯ liá»‡u trong db vÃ o volume (mysql sáº½ lÆ°u theo Ä‘á»‹a chá»‰: /var/lib/mysql )





\#8 DEV SERVER Vá»šI DOCKER BIND MOUNTS - LIVE RELOADING CODE



Â 	https://docs.docker.com/get-started/workshop/06\_bind\_mounts/



Â 

Â 	> Ta hoÃ n toÃ n cÃ³ thá»ƒ sá»­ dá»¥ng docker compose watch Ä‘á»ƒ live reloading code luÃ´n





ğŸ”¥ Khi nÃ o dÃ¹ng bind mount?

Khi báº¡n cáº§n cháº¡y code tá»« host vÃ o container (vÃ­ dá»¥ cháº¡y Node.js vÃ  hot reload)



Khi cáº§n chia sáº» log hoáº·c file táº¡m thá»i giá»¯a container vÃ  mÃ¡y tháº­t





ğŸ§  Bind mount khÃ¡c gÃ¬ volume?



Â 			Bind mount			Volume

NÆ¡i lÆ°u dá»¯ liá»‡u		Báº¡n chá»‰ Ä‘á»‹nh thÆ° má»¥c trÃªn host	Docker tá»± quáº£n lÃ½ trong /var/lib/docker/...



Dá»… chia sáº» code		âœ… Dá»… dÃ ng chia sáº» thÆ° má»¥c code	âŒ KhÃ´ng dÃ¹ng Ä‘á»ƒ phÃ¡t triá»ƒn trá»±c tiáº¿p



Äá»™ tin cáº­y, an toÃ n	âŒ Dá»… lá»—i náº¿u chá»‰ Ä‘á»‹nh sai		âœ… An toÃ n, Ä‘Æ°á»£c Docker quáº£n lÃ½



PhÃ¹ há»£p cho		PhÃ¡t triá»ƒn, debug		LÆ°u trá»¯ dá»¯ liá»‡u sáº£n xuáº¥t (MySQL, Postgres...)







\#9 Multi CONTAINER APPS - QUáº¢N LÃ NHIá»€U á»¨NG Dá»¤NG Vá»šI DOCKER



###### Â 	1. Äáº§u tiÃªn ta pháº£i hiá»ƒu Compose Stack lÃ  gÃ¬.



Â \* Compose Stack = Má»™t nhÃ³m container (service) Ä‘á»‹nh nghÄ©a trong 1 file docker-compose.yml, cháº¡y vÃ  quáº£n lÃ½ cÃ¹ng nhau.

Â 

\* Khi ta báº­t á»©ng dá»¥ng docker sáº½ tháº¥y cÃ³ 1 stack chá»©a cÃ¡c docker container bÃªn trong, má»—i docker container láº¡i cÃ³ 1 docker image



VD:



ğŸ§  VÃ­ dá»¥:

Giáº£ sá»­ báº¡n cÃ³ má»™t há»‡ thá»‘ng web:



frontend (React app)



backend (Node.js API)



db (MySQL)



Táº¥t cáº£ sáº½ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong má»™t docker-compose.yml



Â 	> docker compose up -d



LÃºc nÃ y toÃ n bá»™ há»‡ thá»‘ng (gá»i lÃ  stack) sáº½ cÃ¹ng Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng vÃ  quáº£n lÃ½ nhÆ° 1 khá»‘i.





###### Â 	2. Nhiá»u app bÃªn trong container



Â 	+ Má»—i má»™t container chá»‰ nÃªn chá»©a 1 images vÃ  lÃ m tá»‘t nhiá»‡m vá»¥ cá»§a nÃ³, nhiá»u sáº½ gÃ¢y khÃ³ báº£o trÃ¬



###### Â 	3. Docker Network 


		1. Docker Network lÃ  gÃ¬ ?

		+ Docker network lÃ  há»‡ thá»‘ng máº¡ng áº£o mÃ  Docker táº¡o ra Ä‘á»ƒ cÃ¡c container cÃ³ thá»ƒ giao tiáº¿p vá»›i nhau vÃ  vá»›i host hoáº·c internet má»™t cÃ¡ch an toÃ n vÃ  linh hoáº¡t.

		
		âœ… Khi nÃ o cáº§n Docker network?

Khi báº¡n cÃ³ nhiá»u container cáº§n liÃªn láº¡c ná»™i bá»™ (frontend â†” backend â†” database).

Khi muá»‘n phÃ¢n vÃ¹ng máº¡ng (báº£o máº­t tá»‘t hÆ¡n).

Khi dÃ¹ng Docker Compose (nÃ³ tá»± táº¡o máº¡ng riÃªng cho báº¡n).


		* LÆ°u Ã½: Náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i docker compose, thÃ¬ máº·c Ä‘á»‹nh cÃ¡c container sáº½ náº±m chung 1 network riÃªng rá»“i (báº¡n khÃ´ng cáº§n táº¡o thá»§ cÃ´ng). NhÆ°ng trong nhá»¯ng trÆ°á»ng há»£p phá»©c táº¡p hÆ¡n, viá»‡c hiá»ƒu rÃµ docker network giÃºp báº¡n linh hoáº¡t cáº¥u trÃºc á»©ng dá»¥ng.



		2. Táº¡o network 

https://docs.docker.com/get-started/workshop/07_multi_container/




\#10 DOCKER COMPOSE - Dung Há»£p á»¨ng Dá»¥ng Docker ThÃ nh Duy Nháº¥t 


	1. Docker Compose lÃ  gÃ¬ ? 

	+ Docker Compose lÃ  cÃ´ng cá»¥ giÃºp báº¡n dá»… dÃ ng Ä‘á»‹nh nghÄ©a vÃ  cháº¡y nhiá»u container Docker cÃ¹ng lÃºc chá»‰ báº±ng má»™t file cáº¥u hÃ¬nh duy nháº¥t (docker-compose.yml).

	ğŸ“¦ TÃ¡c dá»¥ng cá»§a Docker Compose:

Tá»• chá»©c á»©ng dá»¥ng gá»“m nhiá»u dá»‹ch vá»¥ (multi-container).

Dá»… dÃ ng cáº¥u hÃ¬nh máº¡ng, volume, mÃ´i trÆ°á»ng.

Quáº£n lÃ½ toÃ n bá»™ stack (dá»‹ch vá»¥) báº±ng má»™t file.

Tiá»‡n cho phÃ¡t triá»ƒn, test, staging, production.


ğŸš€ Lá»‡nh cÆ¡ báº£n:

| Lá»‡nh                   | TÃ¡c dá»¥ng                                       |
| ---------------------- | ---------------------------------------------- |
| `docker compose up`    | Build + run toÃ n bá»™ container tá»« file YAML     |
| `docker compose up -d` | Cháº¡y ná»n (detached mode)                       |
| `docker compose down`  | Dá»«ng vÃ  xÃ³a toÃ n bá»™ container, network, volume |
| `docker compose build` | Chá»‰ build cÃ¡c image trong file `compose`       |
| `docker compose logs`  | Xem log táº­p trung cá»§a táº¥t cáº£ container         |
| `docker compose ps`    | Liá»‡t kÃª tráº¡ng thÃ¡i cÃ¡c container               |

		

	2. Má»™t sá»‘ tá»« khÃ³a cÆ¡ báº£n trong docker-compose.yml 

version: '3.8'        # version cá»§a docker compose file
services:             # Táº­p há»£p cÃ¡c service (má»—i service lÃ  1 container)
  backend:
    build: ./backend          # build image tá»« Dockerfile táº¡i ./backend
    image: my-backend-app     # hoáº·c dÃ¹ng image cÃ³ sáºµn
    ports:
      - "5000:5000"           # map port host:container
    volumes:
      - ./backend:/app        # bind mount mÃ£ nguá»“n vÃ o container
    depends_on:
      - db                    # chá» db khá»Ÿi Ä‘á»™ng trÆ°á»›c

  frontend:
    build: ./frontend
    ports:
      - "3000:3000"

  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: secret
      MYSQL_DATABASE: mydb
    volumes:
      - mysql-data:/var/lib/mysql

volumes:
  mysql-data:


| Tá»« khÃ³a       | Ã nghÄ©a ngáº¯n gá»n                                     |
| ------------- | ---------------------------------------------------- |
| `services`    | CÃ¡c container (backend, frontend, db,...)            |
| `build`       | NÆ¡i chá»©a Dockerfile Ä‘á»ƒ build image                   |
| `image`       | TÃªn image náº¿u dÃ¹ng image cÃ³ sáºµn                      |
| `ports`       | Má»Ÿ cá»•ng (host\:container)                            |
| `volumes`     | Mount volume Ä‘á»ƒ lÆ°u dá»¯ liá»‡u hoáº·c mount mÃ£ nguá»“n      |
| `environment` | Biáº¿n mÃ´i trÆ°á»ng cho container                        |
| `depends_on`  | Khá»Ÿi cháº¡y theo thá»© tá»±                                |
| `networks`    | Cáº¥u hÃ¬nh máº¡ng náº¿u cáº§n (máº·c Ä‘á»‹nh Ä‘Ã£ cÃ³ network riÃªng) |



	3. CÃ¡c bÆ°á»›c Ä‘Ã³ng gÃ³i 1 á»©ng dá»¥ng fullstack fe, be, db 

		1. Pháº£i cÃ³ á»©ng dá»¥ng :)

		2. Táº¡o Dockerfile cho tá»«ng pháº§n 

		VD: Frontend 

FROM node:18
WORKDIR /app
COPY . .
RUN npm install
RUN npm run build
EXPOSE 3000
CMD ["npm", "run", "preview"]  # hoáº·c start náº¿u lÃ  SSR


		3. Táº¡o file docker compose 

version: '3.8'
services:
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    depends_on:
      - backend

  backend:
    build: ./backend
    ports:
      - "5000:5000"
    environment:
      DB_HOST: db
    depends_on:
      - db

  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: secret
      MYSQL_DATABASE: mydb
    volumes:
      - db-data:/var/lib/mysql

volumes:
  db-data:
		

		4. build vÃ  cháº¡y

docker compose up --build



	3. Má»™t sá»‘ lÆ°u Ã½:

	+ ThÆ°á»ng sáº½ deploy riÃªng fe, be, db 

	+ docker compose gom táº¥t cáº£ fe, be, db Ä‘á»ƒ ngÆ°á»i dÃ¹ng dá»… dÃ ng test. tuy nhiÃªn khÃ´ng nÃªn deploy cáº£ 1 docker compose to nhÆ° váº­y lÃªn production 


	
	4. Quy trÃ¬nh cÃ³ thá»ƒ hiá»ƒu Ä‘Æ¡n giáº£n nhÆ° sau 

ğŸŸ¡ 1. Khá»Ÿi Ä‘áº§u â€“ táº¡o DB riÃªng vá»›i Docker Compose
Táº¡o file docker-compose.mysql.yml chá»‰ Ä‘á»ƒ cháº¡y MySQL (hoáº·c PostgreSQL).

Dá»… test backend sá»›m, dá»… backup DB.

ğŸ”µ 2. PhÃ¡t triá»ƒn FE vÃ  BE bÃ¬nh thÆ°á»ng
Viáº¿t code frontend/backend nhÆ° bÃ¬nh thÆ°á»ng.

Backend connect vÃ o DB thÃ´ng qua host mysql (náº¿u dÃ¹ng Docker), hoáº·c host.docker.internal (trong local).

ğŸŸ¢ 3. Sau khi hoÃ n thÃ nh â€“ táº¡o 1 file docker-compose.yml tá»•ng
Gá»™p cáº£: mysql + backend + frontend.

Dá»… dÃ ng cháº¡y toÃ n bá»™ app báº±ng docker compose up.

ğŸŸ£ 4. Gá»­i cho customer
Gá»­i repo + file docker-compose.yml.

Há» chá»‰ cáº§n cháº¡y 1 lá»‡nh: docker compose up lÃ  xem Ä‘Æ°á»£c app hoÃ n chá»‰nh.

ğŸ”´ 5. Khi khÃ¡ch Ä‘á»“ng Ã½ â†’ triá»ƒn khai (deploy)
Frontend: Deploy riÃªng lÃªn Vercel, Netlify, S3 hoáº·c VPS.

Backend: Deploy image riÃªng lÃªn VPS hoáº·c platform khÃ¡c.

MySQL:

Táº¡o container DB riÃªng tá»« image mysql + volume.

Hoáº·c dÃ¹ng dá»‹ch vá»¥ DB chuyÃªn nghiá»‡p nhÆ° Supabase, Railway...



\#11. Thá»±c hÃ nh Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vá»›i docker.


	1. Chuáº©n bá»‹ cho mÃ´i trÆ°á»ng production 

		+ Xá»­ lÃ½ file env
		
		+ Xá»­ lÃ½ sequelize 



	2. Build DB vá»›i Docker 

		* ThÆ°á»ng bÆ°á»›c nÃ y ta cÃ³ thá»ƒ lÃ m luÃ´n tá»« Ä‘áº§u Ä‘á»ƒ cÃ³ db dÃ¹ng 

		B1. táº¡o folder docker > docker-compose.yaml 
		
		B2. 

services:
  db-mysql:                                # TÃªn service lÃ  db-mysql
    image: mysql:5.7.40                    # DÃ¹ng image MySQL phiÃªn báº£n z5.7.40
    restart: always                        # Container sáº½ tá»± khá»Ÿi Ä‘á»™ng láº¡i náº¿u bá»‹ dá»«ng

    environment:                           # CÃ¡c biáº¿n mÃ´i trÆ°á»ng cáº¥u hÃ¬nh MySQL
      - MYSQL_DATABASE=letwatch_database   # Tá»± Ä‘á»™ng táº¡o database tÃªn lÃ  letwatch_database
      - MYSQL_ROOT_PASSWORD=letwatch1208   # Thiáº¿t láº­p máº­t kháº©u root lÃ  letwatch1208

    ports:
      - "8080:3306"                         # Port 8080 (mÃ¡y báº¡n) â†’ 3306 (trong container)

    volumes:
      - mysql-data:/var/lib/mysql          # Gáº¯n volume Ä‘á»ƒ lÆ°u dá»¯ liá»‡u MySQL bá»n vá»¯ng

volumes:
  mysql-data:                              # Äá»‹nh nghÄ©a volume tÃªn lÃ  mysql-data


		B3. Build dbÂ 

docker compose -f <ten-file> -p nodejs-sql up -d        # Khá»Ÿi cháº¡y container (cháº¡y ná»n)

	-p : 

Máº·c Ä‘á»‹nh Docker Compose sáº½ dÃ¹ng tÃªn thÆ° má»¥c lÃ m project name

Khi báº¡n dÃ¹ng -p nodejs-sql, nÃ³ Ã©p buá»™c táº¥t cáº£ container/volume/network cá»§a project nÃ y dÃ¹ng prefix nodejs-sql_


	-d : cháº¡y ná»n

	-f : chá»‰ Ä‘á»‹nh tÃªn file compose cá»¥ thá»ƒ 

docker-compose down         # Táº¯t vÃ  xoÃ¡ container (volume váº«n giá»¯ nguyÃªn)
docker volume ls            # Xem cÃ¡c volume hiá»‡n cÃ³
docker volume inspect mysql-data    # Xem thÃ´ng tin volume mysql-data


		B4: Build backend

( tham kháº£o: https://docs.docker.com/reference/dockerfile/ )

			1. Viáº¿t docker file cho be


 # 1. DÃ¹ng image nháº¹ node alpine
FROM node:20-alpine

# 2. Táº¡o vÃ  chuyá»ƒn vÃ o thÆ° má»¥c lÃ m viá»‡c trong container
WORKDIR /letwatch-backend

# 3. Copy file cáº¥u hÃ¬nh trÆ°á»›c Ä‘á»ƒ táº­n dá»¥ng cache
COPY package*.json ./

# 4. CÃ i Ä‘áº·t dependencies
RUN npm install

# 5. Copy toÃ n bá»™ source code
COPY . .

# 6. Máº·c Ä‘á»‹nh khi container start, cháº¡y á»©ng dá»¥ng (start script Ä‘á»‹nh nghÄ©a trong package.json)
CMD [ "npm", "start" ]



		B5: Build frontend

# ğŸ‘‰ Stage 1: Build á»©ng dá»¥ng Next.js
FROM node:18-alpine AS builder     # âœ… Sá»­ dá»¥ng image Node.js nháº¹ (Alpine), Ä‘áº·t tÃªn stage lÃ  "builder"

WORKDIR /app                       # âœ… Táº¡o thÆ° má»¥c /app trong container vÃ  chuyá»ƒn vÃ o Ä‘Ã³
COPY package*.json ./              # âœ… Copy file package.json vÃ  package-lock.json vÃ o container
RUN npm install                    # âœ… CÃ i Ä‘áº·t toÃ n bá»™ dependency tá»« package.json

COPY . .                           # âœ… Copy toÃ n bá»™ mÃ£ nguá»“n vÃ o container
RUN npm run build                  # âœ… Build á»©ng dá»¥ng Next.js ra mÃ£ production (táº¡o folder `.next`)

# ğŸ‘‰ Stage 2: Cháº¡y á»©ng dá»¥ng vá»›i Next.js server
FROM node:18-alpine                # âœ… Báº¯t Ä‘áº§u stage má»›i, tiáº¿p tá»¥c dÃ¹ng Node.js Alpine cho nháº¹

WORKDIR /app                       # âœ… Táº¡o thÆ° má»¥c má»›i vÃ  chuyá»ƒn vÃ o
COPY --from=builder /app ./        # âœ… Copy toÃ n bá»™ file Ä‘Ã£ build tá»« stage builder sang stage hiá»‡n táº¡i

EXPOSE 3000                        # âœ… Má»Ÿ cá»•ng 3000 Ä‘á»ƒ bÃªn ngoÃ i cÃ³ thá»ƒ truy cáº­p vÃ o (Next.js máº·c Ä‘á»‹nh dÃ¹ng port 3000)

CMD ["npm", "start"]               # âœ… Lá»‡nh máº·c Ä‘á»‹nh khi container cháº¡y: dÃ¹ng Next.js server (start = next start)


		B6. Viáº¿t file docker-compose cho toÃ n bá»™ dá»± Ã¡n 


services:

  letwatch-database:                                  # âœ… Service MySQL â€“ Database dÃ¹ng chung cho backend
    image: mysql:5.7.40                               # âœ… DÃ¹ng image MySQL phiÃªn báº£n 5.7.40 tá»« Docker Hub
    restart: always                                   # âœ… LuÃ´n restart láº¡i container náº¿u cÃ³ lá»—i hoáº·c dá»«ng báº¥t ngá»

    environment:                                      # âœ… CÃ¡c biáº¿n mÃ´i trÆ°á»ng dÃ¹ng Ä‘á»ƒ khá»Ÿi táº¡o DB
      - MYSQL_DATABASE=letwatch_database             # TÃªn DB táº¡o sáºµn
      - MYSQL_ROOT_PASSWORD=letwatch1208             # Máº­t kháº©u cho tÃ i khoáº£n root

    ports:
      - "8080:3306"                                   # âœ… Map port: bÃªn ngoÃ i lÃ  8080, bÃªn trong container lÃ  3306
                                                      # âš ï¸ Chá»‰ dÃ¹ng khi báº¡n muá»‘n káº¿t ná»‘i tá»« mÃ¡y host â†’ container
    expose:
      - 3306                                          # âœ… Cho phÃ©p cÃ¡c container khÃ¡c trong cÃ¹ng máº¡ng Docker gá»i qua cá»•ng 3306

    volumes:
      - mysql-data:/var/lib/mysql                    # âœ… Gáº¯n volume Ä‘á»ƒ lÆ°u dá»¯ liá»‡u DB (trÃ¡nh máº¥t khi xÃ³a container)

  letwatch-backend:                                   # âœ… Service backend (Node.js + Express)
    build: 
      context: ./letwatch_backend_app                 # âœ… ThÆ° má»¥c chá»©a mÃ£ nguá»“n backend + Dockerfile
      dockerfile: Dockerfile                          # âœ… TÃªn Dockerfile Ä‘á»ƒ build backend
    restart: unless-stopped                           # âœ… Restart láº¡i trá»« khi báº¡n stop thá»§ cÃ´ng

    environment:
      - LETWATCH_DB_HOSTNANE=letwatch-database        # âŒ Sai chÃ­nh táº£! â†’ nÃªn sá»­a thÃ nh `LETWATCH_DB_HOSTNAME`
                                                      # âœ… ÄÃ¢y lÃ  tÃªn service MySQL â€“ backend sáº½ connect Ä‘áº¿n Ä‘Ã¢y
      - LETWATCH_DB_PORT=3306                         # âœ… Port ná»™i bá»™ MySQL â€“ pháº£i lÃ  3306 (máº·c Ä‘á»‹nh)

    ports:
      - 4000:4000                                     # âœ… Má»Ÿ cá»•ng Ä‘á»ƒ gá»i API tá»« mÃ¡y host â†’ container

  letwatch-frontend:                                  # âœ… Service frontend (Next.js)
    build: 
      context: ./letwatch_frontend_app                # âœ… ThÆ° má»¥c chá»©a mÃ£ nguá»“n frontend + Dockerfile
      dockerfile: Dockerfile                          # âœ… Dockerfile Ä‘á»ƒ build FE
    restart: unless-stopped                           # âœ… Tá»± restart náº¿u cÃ³ lá»—i

    depends_on:
      - letwatch-backend                              # âœ… Äáº£m báº£o FE khá»Ÿi Ä‘á»™ng sau khi backend Ä‘Ã£ sáºµn sÃ ng

    ports:
      - 3000:3000                                     # âœ… Cá»•ng FE â€“ thÆ°á»ng dÃ¹ng 3000 cho Next.js

    environment:
      - NEXT_PUBLIC_API_BACKEND_URL=http://localhost:4000/api
                                                      # âœ… Biáº¿n mÃ´i trÆ°á»ng cho client-side gá»i API backend
                                                      # âš ï¸ `localhost` chá»‰ dÃ¹ng Ä‘Æ°á»£c khi cháº¡y app trÃªn mÃ¡y báº¡n
                                                      # ğŸ‘‰ Náº¿u cháº¡y trong container, nÃªn lÃ : `http://letwatch-backend:4000/api`

volumes:
  mysql-data:                                         # âœ… Volume dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u DB


 		Má»™t sá»‘ lÆ°u Ã½: 

	+ Ta cÃ³ thá»ƒ táº¡o riÃªng pháº§n database trÆ°á»›c Ä‘á»ƒ cÃ³ cÃ¡i lÃ m viá»‡c. sau khi hoÃ n thÃ nh thÃ¬ gá»™p chung láº¡i sau. náº¿u muá»‘n khÃ´ng máº¥t dá»¯ liá»‡u thÃ¬ hÃ£y sá»­ dá»¥ng volume
	
	+ Nhá»› chÃº Ã½ pháº§n port Ä‘á»ƒ káº¿t ná»‘i be tá»›i db

	+ Cáº§n cÃ³ dockerfile á»Ÿ 2 pháº§n fe, be Ä‘á»ƒ hÆ°á»›ng dáº«n cho docker compose build 

	+ Cáº§n cÃ³ cáº£ file dockerignore Ä‘á»ƒ trÃ¡nh build nhá»¯ng thá»© khÃ´ng cáº§n thiáº¿t


\#12. Build nginx ( Ä‘á»c lÃ  engine-x ) cháº¡y React Production 

 > âš™ï¸ VÃ¬ sao nÃªn dÃ¹ng NGINX?

Báº£o vá»‡ backend: Giáº¥u Ä‘á»‹a chá»‰ tháº­t cá»§a server backend

Quáº£n lÃ½ traffic hiá»‡u quáº£: CÃ¢n báº±ng táº£i, xá»­ lÃ½ nhiá»u ngÆ°á»i truy cáº­p cÃ¹ng lÃºc

Há»— trá»£ HTTPS: Dá»… cÃ i SSL cho website

PhÃ¹ há»£p vá»›i Docker, DevOps: Dá»… cáº¥u hÃ¬nh, tá»± Ä‘á»™ng hÃ³a, Ä‘Ã³ng gÃ³i



	4. ThÃ´ng nÃ£o 1 sá»‘ thá»© vá» nginx 


	> vá»›i dá»± Ã¡n Nextjs thÃ¬ ta cÃ³ thá»ƒ khÃ´ng cáº§n nginx, tuy nhiÃªn vá»›i dá»± Ã¡n ReactJS sáº½ cáº§n 

		> LÃ­ do:

	+ Äáº§u tiÃªn sau khi ta build xong dá»± Ã¡n reactjs thÃ¬ sáº½ sinh ra 1 folder build chá»©a cÃ¡c file tÄ©nh vÃ  khÃ´ng cÃ³ server

	+  Náº¿u ta tiáº¿p tá»¥c deploy lÃªn vercel,.. thÃ¬ trÃªn Ä‘Ã³ sáº½ cÃ³ 1 server Ä‘á»ƒ serve nhá»¯ng file tÄ©nh cá»§a react sau khi build 

	+ Tuy nhiÃªn náº¿u ta tá»± deploy docker, vps thÃ¬ ta cáº§n cÃ³ 1 server Ä‘á»ƒ giÃºp chuyá»ƒn tiáº¿p cÃ¡c request, vÃ  lÃºc Ä‘Ã³ nginx ra Ä‘á»i



	>>> Tham kháº£o build nginx vá»›i React

	+ Báº¯t Ä‘áº§u tá»«: https://www.youtube.com/watch?v=TMf0ha4AnKU&list=PLncHg6Kn2JT4kLKJ_7uy0x4AdNrCHbe0n&index=19

 

\#12. Má»™t sá»‘ Ä‘iá»u cáº§n biáº¿t khi deploy dá»± Ã¡n vá»›i docker 

	1. TrÆ°á»ng há»£p deploy riÃªng tá»«ng pháº§n ( VD: fe: vercel, be: app platform digital ocean, db: droplet )

	+ Trong trÆ°á»ng há»£p nÃ y ta cÃ³ thá»ƒ sá»­ dá»¥ng nginx á»Ÿ 1 droplet riÃªng sau Ä‘Ã³ cáº¥u hÃ¬nh Ä‘áº¿n dá»± Ã¡n 
	
	+ Do fe Ä‘Ã£ cÃ³ webserver riÃªng phá»¥c vá»¥
	
	2. TrÆ°á»ng há»£p Ä‘Ã³ng gÃ³i chung vÃ o 1 docker stack sau Ä‘Ã³ deploy

	+ á» trÆ°á»ng há»£p nÃ y nginx cÃ³ 1 vai trÃ² ráº¥t quan trá»ng lÃ  ngÆ°á»i Ä‘iá»u hÆ°á»›ng cho toÃ n bá»™ trang web 

	+ Ta cáº§n cáº¥u hÃ¬nh domain trá» vá» nginx, tá»« Ä‘Ã³ nginx sáº½ tiáº¿p nháº­n request tá»« user vÃ  lÃ m viá»‡c vá»›i be,fe,db vÃ  tráº£ vá» thÃ´ng tin cáº§n thiáº¿t cho ngÆ°á»i dÃ¹ng 

	+ Ta cáº§n cáº¥u hÃ¬nh 1 sá»‘ thá»© á»Ÿ nginx cÅ©ng nhÆ° fe, be
	
	+ nginx cÃ³ thá»ƒ dáº¥u domain qua reverse proxy giÃºp báº£o máº­t 

	> Chi tiáº¿t tham kháº£o link video á»Ÿ trÃªn 


#13. DOCKER EXEC

CÃ¢u lá»‡nh docker exec trong Docker Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ thá»±c thi (cháº¡y) má»™t lá»‡nh bÃªn trong má»™t container Ä‘ang cháº¡y.

ğŸ‘‰ NÃ³i cÃ¡ch khÃ¡c: náº¿u container cá»§a báº¡n Ä‘ang cháº¡y, báº¡n cÃ³ thá»ƒ â€œchuiâ€ vÃ o trong nÃ³ hoáº·c cháº¡y má»™t lá»‡nh cá»¥ thá»ƒ mÃ  khÃ´ng cáº§n táº¡o container má»›i.


VD: Má»Ÿ shell bÃªn trong container:

docker exec -it my_container bash







	
